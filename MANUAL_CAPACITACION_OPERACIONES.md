# üìö Manual de Capacitaci√≥n - Sistema de Operaciones

## Bienvenido al Sistema de Control de Operaciones de Spirit Tours

Este manual te guiar√° paso a paso en el uso del nuevo sistema de operaciones.

---

## üéØ Objetivos del Sistema

El sistema de operaciones te permitir√°:
- ‚úÖ Gestionar todas las reservas con proveedores
- ‚úÖ Confirmar reservas autom√°ticamente
- ‚úÖ Validar facturas con IA
- ‚úÖ Cerrar grupos de manera eficiente
- ‚úÖ Recibir alertas de anomal√≠as
- ‚úÖ Obtener ayuda 24/7 del chatbot

---

## üì± M√≥dulo 1: Acceso al Sistema

### 1.1 Inicio de Sesi√≥n
1. Abre tu navegador y ve a: `http://localhost:3000/operations`
2. Ingresa tu usuario y contrase√±a
3. El sistema te redirigir√° al Dashboard de Operaciones

### 1.2 Permisos por Rol
- **Director**: Acceso total
- **Jefe de Operaciones**: Gesti√≥n completa, no puede modificar proveedores
- **Agente de Operaciones**: Crear y editar reservas
- **Contador**: Solo ver y validar facturas

---

## üé® M√≥dulo 2: Dashboard Principal

### 2.1 M√©tricas en Tiempo Real
El dashboard muestra:
- **Grupos Activos**: Grupos en curso
- **Reservas Pendientes**: Esperando confirmaci√≥n
- **Pr√≥ximos Servicios**: Servicios en los pr√≥ximos 7 d√≠as
- **Pagos Pendientes**: Facturas sin pagar

### 2.2 Panel de Alertas
Las alertas se clasifican por color:
- üî¥ **Rojo**: Cr√≠ticas - Requieren acci√≥n inmediata
- üü† **Naranja**: Altas - Atenci√≥n prioritaria
- üü° **Amarillo**: Medias - Revisar pronto
- üîµ **Azul**: Informativas

### 2.3 Acciones R√°pidas
Tres botones de acceso r√°pido:
1. **Nueva Reserva**: Crear reserva con proveedor
2. **Cerrar Grupos**: Ver grupos pendientes de cierre
3. **Validar Facturas**: Procesar facturas pendientes

---

## üìù M√≥dulo 3: Gesti√≥n de Reservas

### 3.1 Crear Nueva Reserva

**Paso 1**: Click en "Nueva Reserva"

**Paso 2**: Completa el formulario:
```
- Proveedor: Selecciona de la lista
- Grupo: Selecciona el grupo
- Tipo de Servicio: Hotel, Transporte, etc.
- Fecha Inicio: Cu√°ndo comienza el servicio
- Fecha Fin: Cu√°ndo termina
- Cantidad: Habitaciones, asientos, etc.
- Precio: Unitario y total
```

**Paso 3**: Click en "Crear Reserva"

El sistema crear√° autom√°ticamente un item en el checklist del grupo.

### 3.2 Confirmar Reserva

**Paso 1**: En la lista de reservas, encuentra la reserva

**Paso 2**: Click en el icono de confirmaci√≥n (‚úì)

**Paso 3**: Ingresa:
```
- N√∫mero de Confirmaci√≥n: Del proveedor
- Confirmado Por: Nombre del contacto
- Email de Confirmaci√≥n: Email del contacto
- Notas: Cualquier informaci√≥n adicional
```

**Paso 4**: Click en "Confirmar"

üí° **Tip**: Si WhatsApp est√° activado para el proveedor, se enviar√° autom√°ticamente una notificaci√≥n.

### 3.3 B√∫squeda de Reservas

Usa los filtros disponibles:
- **B√∫squeda por texto**: N√∫mero de confirmaci√≥n, proveedor
- **Por estado**: Pendiente, Confirmado, etc.
- **Por fecha**: Rango de fechas
- **Por grupo**: Reservas de un grupo espec√≠fico

---

## üìÑ M√≥dulo 4: Validaci√≥n de Facturas con OCR

### 4.1 Subir Factura PDF

**Paso 1**: En la reserva, click en "Subir Factura"

**Paso 2**: Selecciona el archivo PDF

**Paso 3**: El sistema autom√°ticamente:
- ‚úÖ Lee la factura con OCR
- ‚úÖ Extrae n√∫mero, fecha, monto
- ‚úÖ Compara con la reserva
- ‚úÖ Detecta discrepancias

### 4.2 Revisar Resultados de OCR

El sistema mostrar√°:
```
‚úì N√∫mero de Factura: INV-2024-123
‚úì Fecha: 15/03/2024
‚úì Monto Total: $3,000.00
‚úì Coincide con Reserva: S√≠

Score de Confianza: 95%
```

### 4.3 Validaci√≥n Manual

Si hay discrepancias:
1. Revisa los detalles resaltados en rojo
2. Verifica con el proveedor
3. Marca como "Validado" o "Requiere Correcci√≥n"

**Ejemplo de Discrepancia**:
```
‚ö†Ô∏è ALERTA: Discrepancia detectada

Esperado: 25 habitaciones √ó $120 = $3,000
Facturado: 26 habitaciones √ó $120 = $3,120

Acci√≥n requerida: Contactar al proveedor
```

---

## ‚úÖ M√≥dulo 5: Cierre de Grupos

### 5.1 Iniciar Proceso de Cierre

**Paso 1**: Cuando un grupo termina su tour, aparecer√° en "Grupos a Cerrar"

**Paso 2**: Click en el grupo

**Paso 3**: Ver√°s el Checklist de Cierre:

```
GRUPO: TS-2024-001
Estado: ‚ö†Ô∏è Pendiente de Cierre
Progreso: ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë 80%

‚òëÔ∏è Hotel Jerusalem Gold - Factura recibida ‚úì
‚òëÔ∏è Hotel Jerusalem Gold - Pago realizado ‚úì
‚òê Hotel Bethlehem Star - Factura pendiente ‚úó
‚òëÔ∏è Transporte - Todo completo ‚úì
‚òëÔ∏è Entradas - Todo completo ‚úì
```

### 5.2 Completar Items Pendientes

Para cada item pendiente:
1. Click en el item
2. Sube la factura o comprobante
3. El sistema valida autom√°ticamente
4. Marca como "Completo"

### 5.3 Cerrar el Grupo

Cuando todos los items est√©n completos (verde):
1. Click en "Cerrar Grupo"
2. Confirma la acci√≥n
3. El sistema:
   - Marca el grupo como cerrado
   - Env√≠a notificaci√≥n
   - Genera reporte final
   - Archiva toda la informaci√≥n

‚ö†Ô∏è **Importante**: NO puedes cerrar un grupo con items pendientes

---

## ü§ñ M√≥dulo 6: Chatbot IA 24/7

### 6.1 Acceder al Chatbot

El chatbot est√° disponible en la esquina inferior derecha (üí¨)

### 6.2 Preguntas Frecuentes

**Ejemplo 1: C√≥mo crear reserva**
```
T√∫: ¬øC√≥mo creo una nueva reserva?

Bot: Para crear una reserva:
1. Ve a Operaciones > Nueva Reserva
2. Selecciona el proveedor y grupo
3. Completa los detalles del servicio
4. Confirma y guarda

[Bot√≥n: Nueva Reserva]
```

**Ejemplo 2: Problema con factura**
```
T√∫: La factura del hotel no coincide con mi reserva

Bot: Entiendo. Vamos a resolver esto:
1. ¬øCu√°l es el n√∫mero de reserva?
2. ¬øQu√© discrepancia detectaste?
3. ¬øYa contactaste al proveedor?

Te recomiendo:
- Revisar el rooming list
- Verificar las fechas
- Contactar al hotel si la diferencia es mayor al 5%

[Bot√≥n: Ver Detalles de Reserva]
```

### 6.3 An√°lisis de Situaciones

Puedes pedirle al chatbot que analice situaciones:
```
T√∫: Tengo un grupo que termina ma√±ana pero faltan 3 facturas

Bot: Analicemos la situaci√≥n:

üìä Estado actual:
- Grupo: Termina en 24 horas
- Facturas pendientes: 3
- Riesgo: ALTO

üéØ Acciones recomendadas:
1. URGENTE: Contactar proveedores hoy
2. Solicitar facturas por WhatsApp
3. Si no llegan hoy, solicitar por email
4. Escalar a supervisor si no hay respuesta

¬øQuieres que env√≠e recordatorios por WhatsApp?
[Bot√≥n: Enviar WhatsApp]
```

---

## üìû M√≥dulo 7: WhatsApp Business

### 7.1 Activar WhatsApp para Proveedor

Solo administradores pueden activar:
1. Ve a Proveedores
2. Selecciona el proveedor
3. Click en "Configuraci√≥n de WhatsApp"
4. Toggle "Activar" (por defecto est√° desactivado)
5. Confirma el n√∫mero de tel√©fono

### 7.2 Enviar Notificaciones

Una vez activado, puedes enviar:
- ‚úâÔ∏è **Confirmaci√≥n de Reserva**: Autom√°tica al confirmar
- üìÑ **Solicitud de Factura**: Click en "Solicitar Factura"
- üí∞ **Recordatorio de Pago**: En reservas con pago pendiente
- üìã **Solicitud de Rooming**: Para hoteles

**Ejemplo de Mensaje Autom√°tico**:
```
Confirmaci√≥n de reserva para Tierra Santa Marzo 2024.
N√∫mero de confirmaci√≥n: CONF-2024-12345
Fecha: 15/03/2024
Cantidad: 25 habitaciones
```

---

## üîç M√≥dulo 8: Detecci√≥n de Fraudes

### 8.1 Alertas Autom√°ticas

El sistema detecta autom√°ticamente:
- üö® Precios inusualmente altos o bajos
- üö® N√∫meros de confirmaci√≥n duplicados
- üö® Facturas con discrepancias >10%
- üö® Modificaciones r√°pidas (sospechosas)

### 8.2 Qu√© Hacer con una Alerta de Fraude

**Paso 1**: Revisa la alerta en detalle

**Paso 2**: El sistema mostrar√°:
```
‚ö†Ô∏è ALERTA DE FRAUDE DETECTADA

Tipo: PRECIO_ANOMALO
Severidad: ALTA
Risk Score: 75/100

Detalles:
- Precio esperado: $120/habitaci√≥n
- Precio facturado: $180/habitaci√≥n
- Diferencia: +50%

Recomendaci√≥n:
- Verificar con el proveedor
- Solicitar justificaci√≥n por escrito
- No procesar pago sin aprobaci√≥n de supervisor
```

**Paso 3**: Toma acci√≥n seg√∫n la severidad

---

## üí° M√≥dulo 9: Tips y Mejores Pr√°cticas

### 9.1 Workflow Diario Recomendado

**Ma√±ana (9:00 AM)**:
1. Revisa el dashboard
2. Verifica alertas cr√≠ticas
3. Confirma reservas del d√≠a

**Durante el d√≠a**:
1. Responde a alertas
2. Valida facturas recibidas
3. Actualiza estados de pago

**Tarde (5:00 PM)**:
1. Revisa grupos que terminan pronto
2. Prepara cierres para ma√±ana
3. Verifica pendientes

### 9.2 Atajos de Teclado

- `Ctrl + N`: Nueva reserva
- `Ctrl + F`: Buscar
- `Ctrl + /`: Abrir chatbot
- `Esc`: Cerrar modal

### 9.3 Prevenci√≥n de Errores

‚úÖ **Haz esto**:
- Confirma reservas inmediatamente
- Sube facturas apenas las recibes
- Valida rooming lists antes de check-in
- Cierra grupos dentro de 3 d√≠as

‚ùå **Evita esto**:
- Dejar reservas sin confirmar m√°s de 24h
- Acumular facturas para validar despu√©s
- Cerrar grupos sin revisar el checklist
- Ignorar alertas de validaci√≥n

---

## üìä M√≥dulo 10: Reportes y An√°lisis

### 10.1 Reportes Disponibles

1. **Reporte de Grupo**: Resumen completo de un grupo
2. **Reporte de Proveedor**: Servicios con un proveedor
3. **Reporte Financiero**: Estado de pagos y facturas
4. **Reporte de Anomal√≠as**: Problemas detectados

### 10.2 Exportar Datos

Puedes exportar en:
- üìÑ PDF - Para imprimir
- üìä Excel - Para an√°lisis
- üìß Email - Para compartir

---

## üÜò M√≥dulo 11: Soluci√≥n de Problemas

### Problema 1: No puedo crear una reserva
**Soluci√≥n**:
1. Verifica que tienes permisos
2. Aseg√∫rate de llenar todos los campos obligatorios
3. Verifica que las fechas sean futuras
4. Contacta a soporte si persiste

### Problema 2: El OCR no lee mi factura
**Soluci√≥n**:
1. Aseg√∫rate de que el PDF sea de buena calidad
2. Si es escaneado, que est√© derecho (no torcido)
3. Intenta con mejor resoluci√≥n
4. Como √∫ltimo recurso, ingresa los datos manualmente

### Problema 3: No recibo notificaciones de WhatsApp
**Soluci√≥n**:
1. Verifica que WhatsApp est√© activado para el proveedor
2. Confirma el n√∫mero de tel√©fono
3. Revisa los logs de notificaciones
4. Contacta al administrador

---

## üìû Contacto y Soporte

### Soporte T√©cnico
- üìß Email: soporte@spirittours.com
- üì± WhatsApp: +1-XXX-XXX-XXXX
- üïê Horario: Lunes a Viernes, 9AM - 6PM

### Documentaci√≥n Adicional
- Manual t√©cnico: `/docs/SISTEMA_OPERACIONES_COMPLETO_FINAL.md`
- API Documentation: `http://localhost:8000/docs`

---

## ‚úÖ Checklist de Certificaci√≥n

Para ser certificado en el sistema, debes completar:

- [ ] Crear 5 reservas exitosamente
- [ ] Confirmar 3 reservas con proveedores
- [ ] Validar 2 facturas con OCR
- [ ] Cerrar 1 grupo completamente
- [ ] Resolver 3 alertas
- [ ] Usar el chatbot para obtener ayuda
- [ ] Exportar 1 reporte

Una vez completado, ser√°s un **Operador Certificado** ‚ú®

---

¬°Felicidades! Ahora est√°s listo para usar el Sistema de Operaciones de Spirit Tours.

*Para cualquier duda, recuerda que el chatbot est√° disponible 24/7.* ü§ñ