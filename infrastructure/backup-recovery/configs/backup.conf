# =============================================================================
# AI Multi-Model Platform - Backup Configuration
# Enterprise backup system configuration
# =============================================================================

# Backup Base Configuration
BACKUP_BASE_DIR="/var/backups/ai-platform"
BACKUP_RETENTION_DAYS=30
PARALLEL_JOBS=4
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6

# Database Configuration
DB_HOST="localhost"
DB_PORT="5432"
DB_USER="postgres"
DB_PASSWORD=""  # Use .pgpass or environment variable
DB_BACKUP_FORMAT="custom"  # custom, plain, directory, tar
DB_BACKUP_EXCLUDE_DATABASES="template0,template1,postgres"

# MongoDB Configuration (if applicable)
MONGO_HOST="localhost:27017"
MONGO_BACKUP_COMPRESSION=true

# Redis Configuration
REDIS_HOST="localhost"
REDIS_PORT=6379
REDIS_DATA_DIR="/var/lib/redis"
REDIS_BACKUP_RDB=true

# Application Configuration
APP_ROOT="/opt/ai-platform"
APP_USER="ai-platform"
APP_GROUP="ai-platform"
UPLOAD_DIR="/var/lib/ai-platform/uploads"
STATIC_DIR="/var/lib/ai-platform/static"

# Certificate Directories
CERT_DIR="/opt/ai-platform/certs"
SSL_CERT_DIRS="/etc/ssl/ai-platform,/etc/letsencrypt,/etc/nginx/ssl"

# Monitoring Configuration
PROMETHEUS_DATA_DIR="/var/lib/prometheus"
GRAFANA_DATA_DIR="/var/lib/grafana"
MONITORING_CONFIG_DIRS="/etc/prometheus,/etc/grafana"

# Encryption Configuration
ENABLE_ENCRYPTION=true
ENCRYPTION_KEY_FILE="/etc/ai-platform/backup.key"
ENCRYPTION_ALGORITHM="aes-256-gcm"

# Remote Storage Configuration
ENABLE_REMOTE_STORAGE=true
REMOTE_STORAGE_TYPE="s3"  # s3, gcs, azure, rsync
REMOTE_STORAGE_URL="s3://ai-platform-backups"
REMOTE_STORAGE_REGION="us-east-1"

# AWS S3 Configuration
AWS_PROFILE="default"
S3_STORAGE_CLASS="STANDARD_IA"  # STANDARD, STANDARD_IA, GLACIER, DEEP_ARCHIVE
S3_ENCRYPTION="AES256"

# Google Cloud Storage Configuration
GCS_PROJECT_ID=""
GCS_SERVICE_ACCOUNT_KEY=""

# Azure Blob Storage Configuration
AZURE_STORAGE_ACCOUNT=""
AZURE_STORAGE_KEY=""
AZURE_CONTAINER_NAME=""

# Rsync Configuration
RSYNC_USER=""
RSYNC_HOST=""
RSYNC_PATH=""
RSYNC_SSH_KEY=""

# Notification Configuration
ENABLE_NOTIFICATIONS=true
NOTIFICATION_WEBHOOK=""
NOTIFICATION_EMAIL=""
SMTP_SERVER="localhost"
SMTP_PORT=587
SMTP_USERNAME=""
SMTP_PASSWORD=""
SMTP_TLS=true

# Slack Configuration
SLACK_WEBHOOK_URL=""
SLACK_CHANNEL="#alerts"
SLACK_USERNAME="AI Platform Backup"

# Microsoft Teams Configuration
TEAMS_WEBHOOK_URL=""

# PagerDuty Configuration
PAGERDUTY_INTEGRATION_KEY=""
PAGERDUTY_SEVERITY_CRITICAL="critical"
PAGERDUTY_SEVERITY_WARNING="warning"

# Backup Scheduling Configuration
BACKUP_SCHEDULE="daily"  # hourly, daily, weekly, monthly
BACKUP_TIME="02:00"      # 24-hour format
BACKUP_WEEKDAY="sunday"  # For weekly backups
BACKUP_MONTHDAY="1"      # For monthly backups

# Backup Types Configuration
ENABLE_FULL_BACKUP=true
ENABLE_INCREMENTAL_BACKUP=true
ENABLE_DIFFERENTIAL_BACKUP=false
FULL_BACKUP_INTERVAL="weekly"
INCREMENTAL_BACKUP_INTERVAL="daily"

# Performance Configuration
BACKUP_NICE_LEVEL=10        # Process priority (0-19, higher = lower priority)
BACKUP_IONICE_CLASS=2       # I/O scheduling class (1=RT, 2=BE, 3=IDLE)
BACKUP_IONICE_PRIORITY=4    # I/O priority within class (0-7, lower = higher priority)
MAX_CONCURRENT_UPLOADS=2
BANDWIDTH_LIMIT=""          # e.g., "10M" for 10MB/s

# Health Check Configuration
ENABLE_HEALTH_CHECKS=true
HEALTH_CHECK_TIMEOUT=300    # seconds
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_INTERVAL=60    # seconds between retries

# Database Health Checks
DB_HEALTH_CHECK_QUERY="SELECT 1"
DB_HEALTH_CHECK_TIMEOUT=30

# Redis Health Checks
REDIS_HEALTH_CHECK_TIMEOUT=30

# Application Health Checks
APP_HEALTH_CHECK_URL="http://localhost:8080/health"
APP_HEALTH_CHECK_TIMEOUT=30

# Logging Configuration
LOG_LEVEL="INFO"  # DEBUG, INFO, WARN, ERROR
LOG_FILE="/var/log/ai-platform/backup.log"
LOG_MAX_SIZE="100M"
LOG_ROTATE_COUNT=10
ENABLE_SYSLOG=true
SYSLOG_FACILITY="local0"

# Security Configuration
BACKUP_FILE_PERMISSIONS="640"
BACKUP_DIR_PERMISSIONS="750"
BACKUP_OWNER="root"
BACKUP_GROUP="backup"

# Verification Configuration
ENABLE_BACKUP_VERIFICATION=true
VERIFICATION_SAMPLE_SIZE=10  # Percentage of files to verify
VERIFICATION_TIMEOUT=600     # seconds

# Cleanup Configuration
ENABLE_CLEANUP=true
CLEANUP_ORPHANED_FILES=true
CLEANUP_TEMP_FILES=true
CLEANUP_LOG_FILES=true
LOG_RETENTION_DAYS=90

# Maintenance Configuration
ENABLE_MAINTENANCE_MODE=false
MAINTENANCE_MODE_FILE="/var/lib/ai-platform/maintenance"
MAINTENANCE_MODE_MESSAGE="System under maintenance"

# Disaster Recovery Configuration
DR_ENABLED=true
DR_TEST_INTERVAL="monthly"  # weekly, monthly, quarterly
DR_TEST_COMPONENTS="database,application"
DR_VERIFICATION_QUERIES_FILE="/etc/ai-platform/dr-verification.sql"

# Compliance Configuration
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_FILE="/var/log/ai-platform/backup-audit.log"
COMPLIANCE_RETENTION_YEARS=7
ENABLE_DATA_CLASSIFICATION=true

# Custom Hooks Configuration
PRE_BACKUP_HOOK=""
POST_BACKUP_HOOK=""
PRE_RESTORE_HOOK=""
POST_RESTORE_HOOK=""
BACKUP_SUCCESS_HOOK=""
BACKUP_FAILURE_HOOK=""

# Advanced Configuration
ENABLE_DEDUPLICATION=false
DEDUP_DATABASE_PATH="/var/lib/ai-platform/dedup.db"
ENABLE_DELTA_COMPRESSION=false
ENABLE_BLOCK_LEVEL_BACKUP=false
BLOCK_SIZE="64K"

# Cloud-Specific Configuration
# AWS
AWS_KMS_KEY_ID=""
AWS_LIFECYCLE_POLICY=""

# GCS
GCS_KMS_KEY_NAME=""
GCS_LIFECYCLE_POLICY=""

# Azure
AZURE_KMS_KEY_URL=""
AZURE_LIFECYCLE_POLICY=""

# Monitoring and Metrics
ENABLE_METRICS_COLLECTION=true
METRICS_ENDPOINT="/metrics"
METRICS_PORT="9090"
PROMETHEUS_PUSHGATEWAY=""

# Custom Backup Targets
CUSTOM_BACKUP_PATHS=""  # Comma-separated list of additional paths
CUSTOM_EXCLUDE_PATTERNS="*.tmp,*.log,*.cache,node_modules"

# Backup Testing Configuration
ENABLE_BACKUP_TESTING=true
TEST_RESTORE_FREQUENCY="weekly"
TEST_RESTORE_ENVIRONMENT="/tmp/backup-test"
TEST_RESTORE_COMPONENTS="database"

# Performance Tuning
BUFFER_SIZE="64M"
READ_AHEAD="8M"
WRITE_BEHIND="8M"
SYNC_FREQUENCY=30  # seconds

# Network Configuration
NETWORK_TIMEOUT=300  # seconds
CONNECTION_RETRIES=3
CONNECTION_RETRY_DELAY=10  # seconds

# Backup Validation Rules
VALIDATE_FILE_INTEGRITY=true
VALIDATE_BACKUP_SIZE=true
MIN_BACKUP_SIZE_MB=100
MAX_BACKUP_SIZE_GB=1000

# Emergency Configuration
EMERGENCY_CONTACT=""
ESCALATION_TIMEOUT=3600  # seconds
EMERGENCY_PROCEDURES_URL=""

# Development and Testing
DEVELOPMENT_MODE=false
TEST_MODE=false
MOCK_REMOTE_STORAGE=false
DRY_RUN_MODE=false